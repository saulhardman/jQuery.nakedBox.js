window.log = function f(){ log.history = log.history || []; log.history.push(arguments); if(this.console) { var args = arguments, newarr; try { args.callee = f.caller } catch(e) {}; newarr = [].slice.call(args); if (typeof console.log === 'object') log.apply.call(console.log, console, newarr); else console.log.apply(console, newarr);}};
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());
//fgnass.github.com/spin.js#v1.2.5
(function(a,b,c){function g(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function h(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function j(a,b,c,d){var g=["opacity",b,~~(a*100),c,d].join("-"),h=.01+c/d*100,j=Math.max(1-(1-a)/b*(100-h),a),k=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=k&&"-"+k+"-"||"";return e[g]||(i.insertRule("@"+l+"keyframes "+g+"{"+"0%{opacity:"+j+"}"+h+"%{opacity:"+a+"}"+(h+.01)+"%{opacity:1}"+(h+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+j+"}"+"}",0),e[g]=1),g}function k(a,b){var e=a.style,f,g;if(e[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(g=0;g<d.length;g++){f=d[g]+b;if(e[f]!==c)return f}}function l(a,b){for(var c in b)a.style[k(a,c)||c]=b[c];return a}function m(a){for(var b=1;b<arguments.length;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function n(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var d=["webkit","Moz","ms","O"],e={},f,i=function(){var a=g("style");return h(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){if(!this.spin)return new q(a);this.opts=m(a||{},q.defaults,o)};p.defaults={},m(p.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,d=b.el=l(g(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),e=c.radius+c.length+c.width,h,i;a&&(a.insertBefore(d,a.firstChild||null),i=n(a),h=n(d),l(d,{left:(c.left=="auto"?i.x-h.x+(a.offsetWidth>>1):c.left+e)+"px",top:(c.top=="auto"?i.y-h.y+(a.offsetHeight>>1):c.top+e)+"px"})),d.setAttribute("aria-role","progressbar"),b.lines(d,b.opts);if(!f){var j=0,k=c.fps,m=k/c.speed,o=(1-c.opacity)/(m*c.trail/100),p=m/c.lines;!function q(){j++;for(var a=c.lines;a;a--){var e=Math.max(1-(j+a*p)%m*o,c.opacity);b.opacity(d,c.lines-a,e,c)}b.timeout=b.el&&setTimeout(q,~~(1e3/k))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function e(a,d){return l(g(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:d,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*c+b.rotate)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}var c=0,d;for(;c<b.lines;c++)d=l(g(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:f&&j(b.opacity,b.trail,c,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&h(d,l(e("#000","0 0 4px #000"),{top:"2px"})),h(a,h(d,e(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),!function(){function a(a,b){return g("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}var b=l(g("group"),{behavior:"url(#default#VML)"});!k(b,"transform")&&b.adj?(i.addRule(".spin-vml","behavior:url(#default#VML)"),p.prototype.lines=function(b,c){function f(){return l(a("group",{coordsize:e+" "+e,coordorigin:-d+" "+ -d}),{width:e,height:e})}function k(b,e,g){h(i,h(l(f(),{rotation:360/c.lines*b+"deg",left:~~e}),h(l(a("roundrect",{arcsize:1}),{width:d,height:c.width,left:c.radius,top:-c.width>>1,filter:g}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var d=c.length+c.width,e=2*d,g=-(c.width+c.length)*2+"px",i=l(f(),{position:"absolute",top:g,left:g}),j;if(c.shadow)for(j=1;j<=c.lines;j++)k(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(j=1;j<=c.lines;j++)k(j);return h(b,i)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}):f=k(b,"animation")}(),a.Spinner=p})(window,document);$.fn.spin=function(a){this.each(function(){var c=$(this),b=c.data();if(b.spinner){b.spinner.stop();delete b.spinner}if(a!==false){b.spinner=new Spinner($.extend({color:c.css("color")},a)).spin(this)}});return this};
//http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html
var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function stackBlurImage(i,f,g,a){var d=document.getElementById(i);var j=d.naturalWidth;var e=d.naturalHeight;var c=document.getElementById(f);c.style.width=j+"px";c.style.height=e+"px";c.width=j;c.height=e;var b=c.getContext("2d");b.clearRect(0,0,j,e);b.drawImage(d,0,0);if(isNaN(g)||g<1){return}if(a){stackBlurCanvasRGBA(f,0,0,j,e,g)}else{stackBlurCanvasRGB(f,0,0,j,e,g)}}function stackBlurCanvasRGBA(M,G,E,a,c,Q){if(isNaN(Q)||Q<1){return}Q|=0;var j=document.getElementById(M);var aa=j.getContext("2d");var V;try{try{V=aa.getImageData(G,E,a,c)}catch(Z){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");V=aa.getImageData(G,E,a,c)}catch(Z){alert("Cannot access local image");throw new Error("unable to access local image data: "+Z);return}}}catch(Z){alert("Cannot access image");throw new Error("unable to access image data: "+Z)}var h=V.data;var O,N,X,U,s,v,n,f,g,D,T,r,F,B,b,J,P,t,q,m,u,w,z,I;var Y=Q+Q+1;var K=a<<2;var o=a-1;var S=c-1;var l=Q+1;var R=l*(l+1)/2;var H=new BlurStack();var C=H;for(X=1;X<Y;X++){C=C.next=new BlurStack();if(X==l){var k=C}}C.next=H;var W=null;var L=null;n=v=0;var A=mul_table[Q];var d=shg_table[Q];for(N=0;N<c;N++){J=P=t=q=f=g=D=T=0;r=l*(m=h[v]);F=l*(u=h[v+1]);B=l*(w=h[v+2]);b=l*(z=h[v+3]);f+=R*m;g+=R*u;D+=R*w;T+=R*z;C=H;for(X=0;X<l;X++){C.r=m;C.g=u;C.b=w;C.a=z;C=C.next}for(X=1;X<l;X++){U=v+((o<X?o:X)<<2);f+=(C.r=(m=h[U]))*(I=l-X);g+=(C.g=(u=h[U+1]))*I;D+=(C.b=(w=h[U+2]))*I;T+=(C.a=(z=h[U+3]))*I;J+=m;P+=u;t+=w;q+=z;C=C.next}W=H;L=k;for(O=0;O<a;O++){h[v+3]=z=(T*A)>>d;if(z!=0){z=255/z;h[v]=((f*A)>>d)*z;h[v+1]=((g*A)>>d)*z;h[v+2]=((D*A)>>d)*z}else{h[v]=h[v+1]=h[v+2]=0}f-=r;g-=F;D-=B;T-=b;r-=W.r;F-=W.g;B-=W.b;b-=W.a;U=(n+((U=O+Q+1)<o?U:o))<<2;J+=(W.r=h[U]);P+=(W.g=h[U+1]);t+=(W.b=h[U+2]);q+=(W.a=h[U+3]);f+=J;g+=P;D+=t;T+=q;W=W.next;r+=(m=L.r);F+=(u=L.g);B+=(w=L.b);b+=(z=L.a);J-=m;P-=u;t-=w;q-=z;L=L.next;v+=4}n+=a}for(O=0;O<a;O++){P=t=q=J=g=D=T=f=0;v=O<<2;r=l*(m=h[v]);F=l*(u=h[v+1]);B=l*(w=h[v+2]);b=l*(z=h[v+3]);f+=R*m;g+=R*u;D+=R*w;T+=R*z;C=H;for(X=0;X<l;X++){C.r=m;C.g=u;C.b=w;C.a=z;C=C.next}s=a;for(X=1;X<=Q;X++){v=(s+O)<<2;f+=(C.r=(m=h[v]))*(I=l-X);g+=(C.g=(u=h[v+1]))*I;D+=(C.b=(w=h[v+2]))*I;T+=(C.a=(z=h[v+3]))*I;J+=m;P+=u;t+=w;q+=z;C=C.next;if(X<S){s+=a}}v=O;W=H;L=k;for(N=0;N<c;N++){U=v<<2;h[U+3]=z=(T*A)>>d;if(z>0){z=255/z;h[U]=((f*A)>>d)*z;h[U+1]=((g*A)>>d)*z;h[U+2]=((D*A)>>d)*z}else{h[U]=h[U+1]=h[U+2]=0}f-=r;g-=F;D-=B;T-=b;r-=W.r;F-=W.g;B-=W.b;b-=W.a;U=(O+(((U=N+l)<S?U:S)*a))<<2;f+=(J+=(W.r=h[U]));g+=(P+=(W.g=h[U+1]));D+=(t+=(W.b=h[U+2]));T+=(q+=(W.a=h[U+3]));W=W.next;r+=(m=L.r);F+=(u=L.g);B+=(w=L.b);b+=(z=L.a);J-=m;P-=u;t-=w;q-=z;L=L.next;v+=a}}aa.putImageData(V,G,E)}function stackBlurCanvasRGB(J,D,B,a,b,N){if(isNaN(N)||N<1){return}N|=0;var h=document.getElementById(J);var W=h.getContext("2d");var R;try{try{R=W.getImageData(D,B,a,b)}catch(V){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");R=W.getImageData(D,B,a,b)}catch(V){alert("Cannot access local image");throw new Error("unable to access local image data: "+V);return}}}catch(V){alert("Cannot access image");throw new Error("unable to access image data: "+V)}var g=R.data;var L,K,T,Q,q,t,m,d,f,A,n,C,w,G,M,r,l,s,u,F;var U=N+N+1;var H=a<<2;var o=a-1;var P=b-1;var k=N+1;var O=k*(k+1)/2;var E=new BlurStack();var z=E;for(T=1;T<U;T++){z=z.next=new BlurStack();if(T==k){var j=z}}z.next=E;var S=null;var I=null;m=t=0;var v=mul_table[N];var c=shg_table[N];for(K=0;K<b;K++){G=M=r=d=f=A=0;n=k*(l=g[t]);C=k*(s=g[t+1]);w=k*(u=g[t+2]);d+=O*l;f+=O*s;A+=O*u;z=E;for(T=0;T<k;T++){z.r=l;z.g=s;z.b=u;z=z.next}for(T=1;T<k;T++){Q=t+((o<T?o:T)<<2);d+=(z.r=(l=g[Q]))*(F=k-T);f+=(z.g=(s=g[Q+1]))*F;A+=(z.b=(u=g[Q+2]))*F;G+=l;M+=s;r+=u;z=z.next}S=E;I=j;for(L=0;L<a;L++){g[t]=(d*v)>>c;g[t+1]=(f*v)>>c;g[t+2]=(A*v)>>c;d-=n;f-=C;A-=w;n-=S.r;C-=S.g;w-=S.b;Q=(m+((Q=L+N+1)<o?Q:o))<<2;G+=(S.r=g[Q]);M+=(S.g=g[Q+1]);r+=(S.b=g[Q+2]);d+=G;f+=M;A+=r;S=S.next;n+=(l=I.r);C+=(s=I.g);w+=(u=I.b);G-=l;M-=s;r-=u;I=I.next;t+=4}m+=a}for(L=0;L<a;L++){M=r=G=f=A=d=0;t=L<<2;n=k*(l=g[t]);C=k*(s=g[t+1]);w=k*(u=g[t+2]);d+=O*l;f+=O*s;A+=O*u;z=E;for(T=0;T<k;T++){z.r=l;z.g=s;z.b=u;z=z.next}q=a;for(T=1;T<=N;T++){t=(q+L)<<2;d+=(z.r=(l=g[t]))*(F=k-T);f+=(z.g=(s=g[t+1]))*F;A+=(z.b=(u=g[t+2]))*F;G+=l;M+=s;r+=u;z=z.next;if(T<P){q+=a}}t=L;S=E;I=j;for(K=0;K<b;K++){Q=t<<2;g[Q]=(d*v)>>c;g[Q+1]=(f*v)>>c;g[Q+2]=(A*v)>>c;d-=n;f-=C;A-=w;n-=S.r;C-=S.g;w-=S.b;Q=(L+(((Q=K+k)<P?Q:P)*a))<<2;d+=(G+=(S.r=g[Q]));f+=(M+=(S.g=g[Q+1]));A+=(r+=(S.b=g[Q+2]));S=S.next;n+=(l=I.r);C+=(s=I.g);w+=(u=I.b);G-=l;M-=s;r-=u;I=I.next;t+=a}}W.putImageData(R,D,B)}function BlurStack(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null};